<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="hrNS">
	<!-- //사번, 부서번호, 비밀번호, 이름, 이메일, 주소, 전화번호, 입사일, 퇴사여부 -->
	<resultMap id="empResultMap" type="Emp">
		<id 	column="emp_no" 		property="empNo" />
		<result column="password" 		property="password" />
		<result column="emp_name" 		property="empName" />
		<result column="emp_email" 		property="empEmail" />
		<result column="emp_address" 	property="empAddress" />
		<result column="emp_tel" 		property="empTel" />
		<result column="hiredate" 		property="hiredate" />
		<result column="resign" 		property="resign" />
		<association property="dept" javaType="Dept" resultMap="deptResultMap" />
	</resultMap>
	<resultMap id="deptResultMap" type="Dept">
		<id		column="dept_no"		property="deptNo"/>
		<result column="dept_name"		property="deptName"/>
	</resultMap>
	<select id="selectEmp" parameterType="string" resultMap="empResultMap">
		SELECT
			e.emp_no,
			e.dept_no,
			e.password,
			e.emp_name,
			e.emp_email,
			e.emp_address,
			e.emp_tel,
			e.hiredate,
			e.resign,
			d.dept_no,
			d.dept_name
		FROM emp e
		JOIN dept d
		ON e.dept_no = d.dept_no
		WHERE emp_no = #{empNo}
	</select>
	<select id="selectEmpList" resultMap="empResultMap">
		SELECT
			e.emp_no,
			e.dept_no,
			e.password,
			e.emp_name,
			e.emp_email,
			e.emp_address,
			e.emp_tel,
			e.hiredate,
			e.resign,
			d.dept_no,
			d.dept_name
		FROM emp e
		JOIN dept d
		ON e.dept_no = d.dept_no
		ORDER BY e.emp_no
	</select>
	<select id="selectDept" parameterType="string" resultMap="deptResultMap">
		select * from dept where dept_no = #{deptNo}
	</select>
	<select id="selectEmpCount" resultType="_int">
		select count(emp_no) from emp
	</select>
</mapper>